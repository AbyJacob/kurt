<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="http://wiki.scratch.mit.edu/blocksplugin/blocksplugin.js"></script>
    
    <style type="text/css">
    body {
        margin: 1em;
        margin-bottom: 100%;
    }
    textarea {
        font-size: 1em;
        margin-bottom: 1em;
        min-width: 30em;
        min-height: 15em;
    }
    button {
        display: block;
        font-size: 1.25em;
        margin-bottom: 1em;
    }
    #preview {
        margin: 1em;
    }
    </style>
</head>

<body>
    <textarea id="code"></textarea>
    
    <button id="render">Render</button>
    
    <pre id="codepreview"></pre>
    
    <pre id="preview" class="blocks"></pre>
    
    
    <script type="text/javascript">
    code = document.getElementById('code');
    preview = document.getElementById('preview');
    codepreview = document.getElementById('codepreview');
    
    function refresh () {
        script = code.value;
        script = script.replace(/&/g, '&amp;');
		script = script.replace(/</g, '&lt;');
		script = script.replace(/>/g, '&gt;');
		script = script.replace(/"/g, '&quot;');
        preview.innerHTML = script;
        //codepreview.innerHTML = script;
        
        scratchBlocksPlugin.parse({
            containerTag: 'pre',
            containerClass: 'blocks',
            staticDir: 'http://wiki.scratch.mit.edu/blocksplugin/',
        })
    }
    
    document.getElementById('render').onmousedown = refresh;
    code.onkeyup = refresh;
    refresh();
    </script>
</body>
</html>
